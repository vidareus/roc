import{C as e,m as t,c as n}from"./vendor.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(n){const o=new URL(e,location),a=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((n,l)=>{const i=new URL(e,o);if(self[t].moduleMap[i])return n(self[t].moduleMap[i]);const s=new Blob([`import * as m from '${i}';`,`${t}.moduleMap['${i}']=m;`],{type:"text/javascript"}),r=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(s),onerror(){l(new Error(`Failed to import: ${e}`)),a(r)},onload(){n(self[t].moduleMap[i]),a(r)}});document.head.appendChild(r)})),self[t].moduleMap={}}}("/assets/");let o=!1;"dark"===localStorage.theme||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?(document.documentElement.classList.add("dark"),o=!0):document.documentElement.classList.remove("dark"),window.darkModeController=function(){return{darkMode:o,flip(){const e=document.getElementsByTagName("html")[0];"dark"==localStorage.theme?(localStorage.theme="light",e.classList.remove("dark"),this.darkMode=!1):(localStorage.theme="dark",e.classList.add("dark"),this.darkMode=!0)},isDarkMode(){return this.darkMode}}};const a=()=>{document.documentElement.style.setProperty("--app-height",`${window.innerHeight}px`)};window.addEventListener("resize",a),a();let l=!1;function i(){l=!(window.innerWidth<1024)}window.addEventListener("resize",(function(e){i()})),i(),window.navbar_controller=function(){return{navbar_visible:(window.innerWidth>=1024&&(l=!0),l),navbar_close:()=>(l=window.innerWidth>=1024,l)}};const s=function(e){let t={title:"Modal Prompt",mode:"primary",message:"This is message",icon:"bi bi-ui-checks",color:"blue",closeable:!0,bigger:!1,buttons:[],onAppear:function(){},onDisappear:function(){}};t=e;let n="modal-"+Date.now();void 0!==t.id&&(n=t.id);let o=['<div class="block absolute top-0 right-0 pt-4 pr-4">','<button type="button" class="rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 w-6 h-6" ',"@click=\"open = false; document.getElementById('"+n+"').remove();\">",'<span class="sr-only">Close</span>','<i class="fas fa-times text-2xl"></i>',"</button>","</div>"].join(""),a=["@click.away=\"open = false; document.getElementById('"+n+"').remove();\""].join("");t.closeable||(o="",a="");let l="sm:max-w-4xl";function i(e,t){let o="text-white",a="bg-blue-600",l="bg-blue-700",i="ring-blue-500",s="";return""!==e.color&&(o="text-white",a="bg-"+e.color+"-600",l="bg-"+e.color+"-700",i="ring-"+e.color+"-500"),"white"===e.color&&(o="text-black border-gray-300",a="bg-white",l="bg-gray-50",i="ring-gray-300"),!1===t&&(s="mt-3 sm:mt-0"),"open = false"==e.action&&(e.action=e.action+"; document.getElementById('"+n+"').remove();"),['<button type="button" class="'+s+" w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium"," "+a+" "+o+" hover:"+l+" focus:"+i+" focus:outline-none focus:ring-2",' focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm" @click="'+e.action+'">',e.label,"</button>"].join("")}!1===t.bigger&&(l="sm:max-w-xl");let s="";if(t.buttons.length>0)for(var r=0;r<t.buttons.length;r++){let e="";e=i(t.buttons[r],0==r),s=s.concat(e)}let d=['<div id="'+n+'" x-show="open" x-data="{open: true}" class="fixed w-full h-full top-0 left-0 flex items-center justify-center z-20" x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100" x-transition:leave="ease-in duration-200" x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100" x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95">','<div class="modal-overlay absolute w-full h-full bg-black opacity-70 top-0 left-0 cursor-pointer"></div>','<div class="inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all w-11/12 sm:my-8 sm:align-middle '+l+' sm:w-full sm:p-6"  '+a+">",o,'<div class="sm:flex sm:items-start">','<div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-md bg-'+t.color+"-100 dark:bg-"+t.color+'-500 sm:mx-0 sm:h-10 sm:w-10">','<i class="'+t.icon+" text-"+t.color+"-600 dark:text-"+t.color+'-200 text-4xl sm:text-2xl m-auto"></i>',"</div>",'<div class="mt-3 text-left sm:mt-0 sm:ml-4 sm:text-left">','<h3 class="text-lg leading-6 font-semibold text-gray-900 dark:text-gray-200" id="modal-headline">'+t.title+"</h3>",'<div class="mt-2 max-h-72 lg:max-h-96 overflow-y-auto">',t.message,"</div>","</div>","</div>",'<div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">\x3c!--  //--\x3e',s,"</div>","</div>","</div>"].join("");var c=document.createElement("div");return c.innerHTML=d,document.body.appendChild(c),void 0!==t.onAppear&&t.onAppear(),n};window.inapp_modal=s,window.loading_layer=function(e){null!==document.getElementById("loading")&&(document.getElementById("loading").style.display="on"===e?"block":"none")};const r=(new Date).getHours();let d;r<12?d="Good Morning":r>=12&&r<=17?d="Good Afternoon":r>=17&&r<=24&&(d="Good Evening"),null!==document.getElementById("dashboard-greet")&&(document.getElementById("dashboard-greet").innerHTML=d);const c=e=>"checkbox"===e.type||"xhidden"===e.type,u=e=>[].reduce.call(e,((e,t)=>{var n;return(e=>e.name&&e.value)(t)&&(e=>!["checkbox","radio"].includes(e.type)||e.checked)(t)&&(console.log("isCheckbox",c(t),t.type),c(t)?e[t.name]=(e[t.name]||[]).concat(t.value):(e=>e.options&&e.multiple)(t)?e[t.name]=(n=t,[].reduce.call(n,((e,t)=>t.selected?e.concat(t.value):e),[])):e[t.name]=t.value),e}),{});window.match_values=function(e,t){return e===t},window.checkValueExists=function(e){return 0!=e&&""!=e};Symbol.toStringTag;const m=e.create({baseURL:"https://t3-next.cloud.duke.edu/r/"}),h=(e,t,n)=>m({method:e,url:t,data:n,headers:{"Content-Type":"application/json"},withCredentials:!0}).then((e=>Promise.resolve(e.data))).catch((e=>{let t;t=void 0!==e.response?""!=e.response.data.error?e.response.data.error+" ["+e.response.data.code+"@"+e.response.data.request_id+"]":"An unidentifiable error occurred. Please try again later.":"Connection to the server has failed. Please check your internet connections and try again. Please contact OBGE@duke.edu if the problem persists.";return s({icon:"fas fa-exclamation",color:"red",bigger:!1,title:"Request Failed",message:'<p class="text-gray-700 dark:text-gray-400 mb-2">'+t+"</p>",closeable:!0,buttons:[{color:"red",action:"open = false",label:"Close"}]}),Promise.reject(e)})),g=(e,t)=>h("get",e,t),p=(e,t)=>h("put",e,t);window.student_retrieve=async function(){const e=await(async()=>{try{return await g("ip/168.126.45.23")}catch(e){console.error(e)}})();return console.log(e),alert(JSON.stringify(e.data)),e};window.reLogin=function(){var e=window.open("https://yak.t3.medschool.duke.edu/sso/renew_session_popup_flow","","toolbar=0,status=0,width=626,height=436"),t=setInterval((function(){e.closed&&(clearInterval(t),window.loading_layer("off"),document.getElementById("login-modal").remove(),window.whoami())}),500);window.loading_layer("on")},window.external_login_post=async()=>{try{const e=document.getElementById("non-duke"),t=u(e.elements);return await p("accounts/external/login",JSON.stringify(t))}catch(e){console.error(e)}},window.get_code=async function(){const e=await(async()=>{try{const e=document.getElementById("non-duke"),t=u(e.elements);return console.log(t),await g("status",JSON.stringify(t)),await p("accounts/external/code",JSON.stringify(t))}catch(e){console.error(e)}})();if(""!=e.data.token){const t=[{color:"white",action:"open = false",label:"Close"}];document.getElementById("otp_token").value=e.data.token,s({id:"login-modal",icon:"fas fa-check-circle",color:"green",bigger:!1,title:"Email Sent",message:"An one time password is sent to your email if your email matches our records. \n                The code is active for 10 minutes. \n                Please also check your spam box if you can't find any.",closeable:!0,buttons:t})}console.log(e)},window.whoami=async function(){const e=await(async()=>{try{return await g("accounts/me")}catch(e){return e}})();if(console.log(e),0!=e.code){s({id:"login-modal",icon:"fas fa-sign-out-alt",color:"yellow",bigger:!1,title:"Session Not Valid",message:"Your session is either expired or not valid. Please sign in again. T3 will check your sign in status automatically.",closeable:!1,buttons:[{color:"yellow",action:"reLogin()",label:"Sign In Again"}]})}return e},window.prepare_code_request=function(){formToJSON(void 0)},window.external_login=function(){s({icon:"fas fa-sign-out-alt",color:"blue",bigger:!1,title:"External Account Login",message:'<form id="non-duke">\n    <p class="text-base text-gray-700 dark:text-gray-400">\n        <label class="block">\n            <span class="text-gray-700">Please sign in with your non-Duke email. Click Get Code button first to get your one-time code and click Sign In.</span>\n            <input type="hidden" id="otp_token" name="otp_token">\n            <input name="email" class="form-input mt-4 block w-full rounded-md border border-gray-400" placeholder="Email">\n            <input name="otp" class="form-input mt-4 block w-full rounded-md border border-gray-400" placeholder="One Time Password">\n\n            <input type="xhidden" name="task" value="1" checked style="display: none">\n            <input type="xhidden" name="task" value="2" checked style="display: none">\n            <input type="xhidden" name="task" value="3" checked style="display: none">\n            <input type="xhidden" name="task" value="4" checked style="display: none">\n            <input type="xhidden" name="task" value="5" checked style="display: none">\n\n        </label>\n    </p></form>\n',closeable:!0,buttons:[{color:"green",action:"external_login_post()",label:"Sign In"},{color:"white",action:"get_code()",label:"Get Code"}]})},window.logout_modal=function(){s({icon:"fas fa-sign-out-alt",color:"blue",bigger:!1,title:"Log out of T3?",message:'<p class="text-gray-700 dark:text-gray-400 mb-2">You can always log back in at any time.</p>',closeable:!0,buttons:[{color:"blue",action:"logout()",label:"Logout"},{color:"white",action:"open = false",label:"Close"}]})},window.logout=async function(){const e=await(async()=>{try{return await g("accounts/logout")}catch(e){console.error(e)}})();return void 0!==e&&0==e.code?location.href="https://shib.oit.duke.edu/cgi-bin/logout.pl?logoutWithoutPrompt=1&returnto="+window.location.href:void 0!==e&&s({icon:"fas fa-sign-out-alt",color:"red",bigger:!1,title:"Logout Failed",message:"There's no valid session to sign out. Please try again or check your session is still valid.",closeable:!0,buttons:[]}),e},window.calendar_app=function(){return{month:"",year:"",no_of_days:[],blankdays:[],days:["Mon","Tue","Wed","Thu","Fri"],events:[{event_date:t("2021-03-29T08:00:00.000Z"),task_code:"1654845-6516516",event_title:"April Fool's Day",event_theme:"blue"},{event_date:new Date(2020,3,1),task_code:"1654845-6516516",event_title:"April Fool's Day",event_theme:"blue"},{event_date:new Date(2020,3,1),event_title:"April Fool's Day 2",event_theme:"blue"},{event_date:new Date(2020,3,1),event_title:"April Fool's Day 3",event_theme:"blue"},{event_date:new Date(2020,3,1),event_title:"April Fool's Day 4",event_theme:"blue"},{event_date:new Date(2020,3,1),event_title:"April Fool's Day 5",event_theme:"blue"},{event_date:new Date(2020,3,10),event_title:"Birthday",event_theme:"red"},{event_date:new Date(2020,3,16),event_title:"Upcoming Event",event_theme:"green"}],event_title:"",event_date:"",event_theme:"green",themes:[{value:"blue",label:"Blue Theme"},{value:"red",label:"Red Theme"},{value:"yellow",label:"Yellow Theme"},{value:"green",label:"Green Theme"},{value:"purple",label:"Purple Theme"}],openEventModal:!1,initDate(){let e=new Date;this.month=e.getMonth(),this.year=e.getFullYear(),this.datepickerValue=new Date(this.year,this.month,e.getDate()).toDateString()},isToday(e){const t=new Date,n=new Date(this.year,this.month,e);return t.toDateString()===n.toDateString()},showEventModal(e){this.openEventModal=!0,this.event_date=new Date(this.year,this.month,e).toDateString()},addEvent(){""!=this.event_title&&(this.events.push({event_date:this.event_date,event_title:this.event_title,event_theme:this.event_theme}),this.event_title="",this.event_date="",this.event_theme="blue",this.openEventModal=!1)},getNoOfDays(){let e=new Date(this.year,this.month+1,0).getDate(),t=new Date(this.year,this.month).getDay(),n=[];if(6!==t)for(var o=2;o<=t;o++)n.push(o);let a=[];for(o=1;o<=e;o++)6!=new Date(this.year,this.month,o).getDay()&&0!=new Date(this.year,this.month,o).getDay()&&a.push(o);this.blankdays=n,this.no_of_days=a}}},document.addEventListener("DOMContentLoaded",(function(){loading_layer("off")})),n.store("toasts",{counter:0,list:[],createToast(e,t="info"){const n=this.list.length;let o=this.list.filter((e=>e.visible)).length+1;this.list.push({id:this.counter++,message:e,type:t,visible:!0}),setTimeout((()=>{this.destroyToast(n)}),2e3*o)},destroyToast(e){this.list.shift(),this.list[e].visible=!1}});
